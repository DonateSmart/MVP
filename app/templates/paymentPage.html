<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../static/styles/styles.css" />
    <title>Helping is awesome</title>
  </head>
  <body>
    <!------------------------------- NAVBAR ----------------------------------->
    <nav class="navbar navbar-expand-lg navbar-dark bg-donate">
      <div class="container-fluid">
        <a
          class="navbar-brand"
          href="https://www.donatesmart.co.uk/"
          target="_blank"
        >
          <img
            src="/static/assets/images/logo_png.png"
            alt=""
            width="70"
            height="56"
          />
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbarNavAltMarkup"
        >
          <div class="navbar-nav">
            <a
              class="nav-link me-4"
              aria-current="page"
              href="https://www.donatesmart.co.uk/"
              target="_blank"
              >Home</a
            >
            <a
              class="nav-link me-4"
              href="https://www.donatesmart.co.uk/#our-mission"
              target="_blank"
              >Our mission</a
            >
            <a
              class="nav-link me-4"
              href="https://www.donatesmart.co.uk/#what-we-do"
              target="_blank"
              >What we do</a
            >
            <a
              class="nav-link me-4"
              href="https://www.donatesmart.co.uk/#team"
              target="_blank"
              >Team</a
            >
            <a
              class="nav-link me-4"
              href="https://www.donatesmart.co.uk/#social"
              target="_blank"
              >Social Media</a
            >
            <a
              class="nav-link me-4"
              href="https://www.donatesmart.co.uk/#contact"
              target="_blank"
              >Contact</a
            >
          </div>
        </div>
      </div>
    </nav>

    <!---------------------------------- MAIN ------------------------------------>
    <main>
      <div class="container">
        <section class="mt-5">
          <figure
            class="
              d-flex
              flex-column flex-md-row
              justify-content-center
              align-items-center
            "
          >
            <div class="image-container align-self-center me-3">
              <img
                src="/static/assets/images/john-doe.jpg"
                alt="personal photo"
                class="personal-photo"
              />
            </div>
            <div class="text-container">
              <figcaption>
                <h1 class="text-center text-md-start">{{fullname}}</h1>
              </figcaption>
            </div>
          </figure>
        </section>
        <section>
          <form class="mx-auto mt-5" action="/donate/{{person_id}}" method="post">
            <div class="mb-3">
              <label for="amount" class="form-label">Amount</label>
              <input
                type="text"
                class="form-control"
                id="amount"
                placeholder="10.00"
                min="1"
                name="amount"

              />
            </div>
<!--            <button class="btn btn-primary w-100 mb-3" type="button">-->
<!--              Donate with your Credit Card/Debit Card-->
<!--            </button>-->
<!--            <button class="btn btn-outline-secondary w-100 mb-3" type="button">-->
<!--              Donate with-->
<!--              <img-->
<!--                src="/static/assets/images/g-pay-logo.png"-->
<!--                alt="google pay logo"-->
<!--                class="google-pay-logo"-->
<!--              />-->
<!--            </button>-->
<!--            <button class="btn btn-dark w-100 mb-3" type="button">-->
<!--              Donate with-->
<!--              <img-->
<!--                src="/static/assets/images/apple-pay-logo.png"-->
<!--                alt="apple pay logo"-->
<!--                class="apple-pay-logo"-->
<!--              />-->
<!--            </button>-->
            <div id="paypal-button"></div>
            <script src="https://www.paypalobjects.com/api/checkout.js"></script>

            <script>
                var CREATE_PAYMENT_URL  = 'http://127.0.0.1:5000/payment/';
                var EXECUTE_PAYMENT_URL = 'http://127.0.0.1:5000/execute';

                paypal.Button.render({

                    env: 'sandbox', // Or 'sandbox'

                    commit: true, // Show a 'Pay Now' button

                    payment: function() {
                        var amount = document.getElementById("amount").value;
                        var new_payment_url = CREATE_PAYMENT_URL+amount;

                        return paypal.request.post(new_payment_url).then(function(data) {
                            return data.paymentID;
                        });
                    },

                    onAuthorize: function(data) {
                        return paypal.request.post(EXECUTE_PAYMENT_URL, {
                            paymentID: data.paymentID,
                            payerID:   data.payerID
                        }).then(function(res) {

                            console.log(res.success)
                            // The payment is complete!
                            // You can now show a confirmation message to the customer
                        });
                    }

                }, '#paypal-button');
            </script>
        </form>
        </section>
      </div>
    </main>

    <!---------------------------- FOOTER ------------------------->
    <footer class="bg-donate">
      <div
        class="
          container
          d-flex
          justify-content-between
          align-items-center
          social-media-div
          mb-4
        "
      >
        <a
          href="https://www.linkedin.com/company/donate-smart/"
          target="_blank"
          class="d-flex justify-content-center align-items-center"
        >
          <i class="fab fa-linkedin-in"></i>
        </a>
        <a
          href="https://www.instagram.com/donatesmart.uk/"
          target="_blank"
          class="d-flex justify-content-center align-items-center"
        >
          <i class="fab fa-instagram"></i>
        </a>
      </div>
      <div
        class="
          d-flex
          container
          justify-content-evenly
          align-items-center
          text-div
        "
      >
        <p>&copy; Donate Smart</p>
        <p class="border-start border-end px-3">All Rights Reserved</p>
        <p>
          <a href="https://www.donatesmart.co.uk/terms.html" target="_blank"
            >Terms of Service</a
          >
        </p>
      </div>
    </footer>
    <script src="./app.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
